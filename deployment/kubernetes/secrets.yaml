# Kubernetes密钥管理
# 存储敏感数据如数据库密码、API密钥等

apiVersion: v1
kind: Secret
metadata:
  name: codex-database-secret
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: secret
type: Opaque
data:
  # base64编码的数据库连接信息
  # 编码方式: echo -n "username" | base64
  username: cG9zdGdyZXM=  # postgres
  password: bXlzZWNyZXRwYXNz  # mysecretpass
  # 数据库URL (自动生成时使用)
  database-url: cG9zdGdyZXNxbDovL3VzZXJuYW1lOnBhc3N3b3JkQHBvc3RncmVzLXNlcnZpY2U6NTQzMi9jb2RleF9wcm9k
  # SSL证书密钥
  ssl-key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0t
  ssl-cert: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0t
  ssl-ca: LS0tLS1CRUdJTiBJRVQgQ0VSVElGSUNBVEUtLS0tLQ==

---

apiVersion: v1
kind: Secret
metadata:
  name: codex-redis-secret
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-redis
    app.kubernetes.io/component: secret
type: Opaque
data:
  # Redis密码 (base64编码)
  password: bXlyZWRpc3Bhc3N3b3Jk  # myredispassword
  # Redis URL
  redis-url: cmVkaXM6Ly9yZWRpc3Bhc3N3b3JkQHJlZGlzLXNlcnZpY2U6NjM3OS8w

---

apiVersion: v1
kind: Secret
metadata:
  name: codex-api-secret
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: secret
type: Opaque
data:
  # API密钥
  telegram-bot-token: MTMxNjIzNTIzMzE2MzEzNjM1MzYzNjM1MzYzNjM1MzYzNjM=  # 示例token
  telegram-chat-id: LTEzMTYzNzQ1Njc=  # -131637456
  # JWT密钥
  jwt-secret: bXlzdXBlcnNlY3JldGpw dGtleQ==  # mysupersecretjwtkey
  jwt-algorithm: HS256
  # API限流配置
  rate-limit-key: YWRtaW46MzYwMA==

---

apiVersion: v1
kind: Secret
metadata:
  name: codex-trading-secret
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: secret
type: Opaque
data:
  # 交易API密钥
  trading-api-key: ZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5
  trading-api-secret: YVdRakxXcHFaSFowWVc1MllYaHRiV0ZwYVc1bGNtRnNaVzVsWkRGcE1URTM=
  # 第三方数据源API
  data-source-key: ZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5
  # 风控配置
  risk-limit-key: MTAwMDAwMA==
  max-position-size: NTAwMDAwMA==

---

apiVersion: v1
kind: Secret
metadata:
  name: codex-monitoring-secret
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-monitoring
    app.kubernetes.io/component: secret
type: Opaque
data:
  # Grafana管理员密码
  grafana-admin-password: YWRtaW5wYXNz  # adminpass
  # Prometheus远程写配置
  prometheus-remote-write-url: aHR0cHM6Ly9wcm9tZXRoZXVzcy1yZW1vdGUtd3JpdGUuY29tL2Fwaw==
  prometheus-remote-write-token: cG9tZXRoZXVzYXBpa2V5
  # 告警配置
  alertmanager-slack-webhook: aHR0cHM6Ly9ob29rcy5zbGFjay5jb20vc2VydmljZXMvVE9LRU4=
  alertmanager-email-password: bXlwYXNzd29yZA==

---

apiVersion: v1
kind: Secret
metadata:
  name: codex-ssl-cert
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: ssl
type: kubernetes.io/tls
data:
  # TLS证书和私钥
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0t
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0t
  # CA证书链
  ca.crt: LS0tLS1CRUdJTiBJRVQgQ0VSVElGSUNBVEUtLS0tLQ==

---

apiVersion: v1
kind: Secret
metadata:
  name: codex-external-apis
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: external-apis
type: Opaque
data:
  # 外部API密钥
  hkex-api-key: ZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5
  alpha-vantage-key: YWxwaGEtdmFudGFnZS1hcGkta2V5
  yahoo-finance-key: eWFob28tZmluYW5jZS1hcGkta2V5
  # 银行API密钥
  futu-api-key: ZnV0dS1hcGkta2V5
  futu-api-secret: ZnV0dS1hcGktc2VjcmV0
  # 邮件服务密钥
  smtp-username: bm9yZWx5QGF1dGhlbnRpY2F0aW9uLmNvbQ==
  smtp-password: cGFzc3dvcmQxMjM=

---

# 开发环境密钥
apiVersion: v1
kind: Secret
metadata:
  name: codex-database-secret-dev
  namespace: codex-trading-dev
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: secret
type: Opaque
data:
  username: cG9zdGdyZXM=
  password: ZGV2cGFzcw==
  database-url: cG9zdGdyZXNxbDovL3VzZXJuYW1lOmRldnBhc3NAcG9zdGdyZXMtc2VydmljZS1kZXY6NTQzMi9jb2RleF9kZXY=

---

apiVersion: v1
kind: Secret
metadata:
  name: codex-api-secret-dev
  namespace: codex-trading-dev
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: secret
type: Opaque
data:
  telegram-bot-token: ZGV2LWJvdC10b2tlbg==
  jwt-secret: ZGV2LXN1cGVyc2VjcmV0

---

# 测试环境密钥
apiVersion: v1
kind: Secret
metadata:
  name: codex-database-secret-test
  namespace: codex-trading-test
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: secret
type: Opaque
data:
  username: cG9zdGdyZXM=
  password: dGVzdHBhc3M=
  database-url: cG9zdGdyZXNxbDovL3VzZXJuYW1lOnRlc3RwYXNzQHBvc3RncmVzLXNlcnZpY2UtdGVzdDo1NDMyL2NvZGV4X3Rlc3Q=

---

# Opaque类型通用密钥（用于各种配置）
apiVersion: v1
kind: Secret
metadata:
  name: codex-config-secret
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: config
type: Opaque
stringData:
  # 使用明文存储（更易于管理）
  LOG_LEVEL: INFO
  ENVIRONMENT: production
  SENTRY_DSN: https://your-sentry-dsn@sentry.io/project-id
  PAGERDUTY_API_KEY: your-pagerduty-api-key
  SLACK_WEBHOOK_URL: https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
  # 告警联系人
  ALERT_EMAIL: ops-team@company.com
  # 备份配置
  BACKUP_S3_ACCESS_KEY_ID: your-access-key-id
  BACKUP_S3_SECRET_ACCESS_KEY: your-secret-access-key
  BACKUP_S3_BUCKET: codex-trading-backups
  # 监控配置
  PROMETHEUS_RETENTION: 30d
  GRAFANA_RETENTION: 90d

---

# Docker Hub / 私有镜像仓库密钥
apiVersion: v1
kind: Secret
metadata:
  name: codex-registry-secret
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: registry
type: kubernetes.io/dockerconfigjson
data:
  # Docker配置文件(base64编码)
  # 格式: {"auths":{"registry-url":{"username":"user","password":"pass","auth":"base64(user:pass)"}}}
  .dockerconfigjson: eyJhdXRocyI6eyJkb2NrZXIuaW8iOnsidXNlcm5hbWUiOiJ5b3VyLXVzZXIiLCJwYXNzd29yZCI6InlvdXItcGFzcyIsImF1dGgiOiJ5b3VyLXVzZXI6eW91ci1wYXNzIn19fQ==

---

# AWS KMS 密钥ID（用于加密敏感数据）
apiVersion: v1
kind: Secret
metadata:
  name: codex-kms-encryption-key
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: encryption
type: Opaque
data:
  # KMS密钥ID
  kms-key-id: YXJuOmF3czprbXM6dXMtd2VzdC0xOjAwMDEzNjMzOTQxNjoyNjYzMjE1ZDYtMzNmNy00ZmY3LWFhYWEtZTllNjI0NWE0NWY4
  # KMS区域
  kms-region: dXMtd2VzdC0x
