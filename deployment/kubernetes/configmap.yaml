# Kubernetes配置映射
# 存储应用程序配置

apiVersion: v1
kind: ConfigMap
metadata:
  name: codex-config
  namespace: codex-trading
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: config
data:
  # 应用配置
  ENVIRONMENT: "production"
  DEBUG: "false"
  LOG_LEVEL: "INFO"

  # API配置
  API_HOST: "0.0.0.0"
  API_PORT: "8001"
  API_WORKERS: "4"

  # 数据库配置
  DB_POOL_SIZE: "10"
  DB_MAX_OVERFLOW: "20"
  DB_POOL_TIMEOUT: "30"
  DB_POOL_RECYCLE: "3600"

  # Redis配置
  REDIS_POOL_SIZE: "10"
  REDIS_TIMEOUT: "5"
  REDIS_MAX_RETRIES: "3"

  # 缓存配置
  CACHE_DEFAULT_TTL: "300"
  CACHE_MAX_SIZE: "10000"

  # 监控配置
  METRICS_ENABLED: "true"
  HEALTH_CHECK_ENABLED: "true"
  PROMETHEUS_ENABLED: "true"

  # 安全配置
  SECURITY_CORS_ORIGINS: "https://codex.trading,https://dashboard.codex.trading"
  SECURITY_RATE_LIMIT: "1000"
  SECURITY_SESSION_TIMEOUT: "3600"

  # 交易配置
  TRADING_MAX_ORDER_SIZE: "1000000"
  TRADING_RISK_LIMIT: "0.1"
  TRADING_ENABLE_PAPER_TRADING: "false"

  # 数据源配置
  DATA_REFRESH_INTERVAL: "60"
  DATA_RETENTION_DAYS: "365"
  DATA_BACKUP_ENABLED: "true"
---
# 开发环境配置
apiVersion: v1
kind: ConfigMap
metadata:
  name: codex-config-dev
  namespace: codex-trading-dev
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: config
data:
  ENVIRONMENT: "development"
  DEBUG: "true"
  LOG_LEVEL: "DEBUG"
  API_WORKERS: "1"
  DB_POOL_SIZE: "5"
  REDIS_POOL_SIZE: "5"
  SECURITY_RATE_LIMIT: "100"
  TRADING_ENABLE_PAPER_TRADING: "true"
  DATA_BACKUP_ENABLED: "false"
---
# 测试环境配置
apiVersion: v1
kind: ConfigMap
metadata:
  name: codex-config-test
  namespace: codex-trading-test
  labels:
    app.kubernetes.io/name: codex-trading
    app.kubernetes.io/component: config
data:
  ENVIRONMENT: "testing"
  DEBUG: "false"
  LOG_LEVEL: "WARNING"
  API_WORKERS: "1"
  DB_POOL_SIZE: "2"
  REDIS_POOL_SIZE: "2"
  SECURITY_RATE_LIMIT: "10"
  TRADING_ENABLE_PAPER_TRADING: "true"
