# 港股技术分析代理 (HK Stock Technical Analyst)

专门针对港股的量化分析AI代理，追求高Sharpe Ratio的交易策略，强调风险调整后回报最大化。

## 🎯 核心特性

- **技术指标计算**: MA(移动平均)、RSI(相对强弱指数)、MACD(指数平滑异同移动平均线)
- **智能信号生成**: 基于多指标综合判断的买卖信号
- **风险管理**: Sharpe Ratio优化，目标值>1.5
- **港股特化**: 针对港股市场特点的交易建议
- **JSON格式输出**: 标准化的分析结果格式

## 📊 输入数据格式

```json
{
  "stock": "0700.HK",
  "close_prices": [100, 102, 98, 105, ...],
  "volumes": [1000000, 1200000, ...]
}
```

## 📈 输出结果格式

```json
{
  "stock": "0700.HK",
  "signals": [0, 0, 1, -1, 0, ...],
  "rsi_avg": 65.23,
  "sharpe_contribution": 0.342,
  "recommendations": [
    "⚠️ 技术警示：RSI超买，建议减仓",
    "📈 趋势信号：技术面偏多",
    "🛡️ 风险管理：止损位建议",
    "🇭🇰 港股提示：注意波动时段"
  ],
  "analysis_summary": {
    "total_signals": 15,
    "buy_signals": 8,
    "sell_signals": 7,
    "current_price": 450.3,
    "current_rsi": 71.33
  }
}
```

## 🔧 使用方法

### 基本使用

```python
from hk_stock_technical_analyst import HKStockTechnicalAnalyst

# 创建分析师实例
analyst = HKStockTechnicalAnalyst(target_sharpe=1.5)

# 准备股票数据
data = {
    "stock": "0700.HK",
    "close_prices": [320.0, 325.5, 318.2, ...]
}

# 执行分析
result = analyst.analyze(data)
print(json.dumps(result, ensure_ascii=False, indent=2))
```

### 命令行使用

```bash
# 运行示例分析
python3 hk_stock_technical_analyst.py

# 运行多场景对比分析
python3 example_analysis.py
```

## 📋 技术指标说明

### 移动平均线 (MA)
- **周期**: 20日
- **用途**: 趋势判断，支撑阻力位
- **信号**: 价格突破MA为买入信号

### 相对强弱指数 (RSI)
- **周期**: 14日
- **范围**: 0-100
- **超买**: >80 (卖出信号)
- **超卖**: <20 (买入机会)
- **健康区间**: 30-70

### MACD指标
- **快线**: 12日EMA
- **慢线**: 26日EMA
- **信号线**: 9日EMA
- **金叉**: MACD > 信号线 (买入)
- **死叉**: MACD < 信号线 (卖出)

## 🎯 交易信号规则

### 买入条件 (信号=1)
1. 价格 > 20日MA (突破趋势线)
2. 30 < RSI < 70 (避免超买超卖)
3. MACD金叉 (动量确认)

### 卖出条件 (信号=-1)
1. RSI > 80 (超买)
2. 价格 < MA*0.95 (跌破支撑)
3. MACD死叉 (动量转弱)

### 持有条件 (信号=0)
- 不满足买卖条件时保持观望

## 📊 Sharpe Ratio计算

策略Sharpe比率 = (策略平均收益) / (策略收益标准差)

- **贡献值范围**: -1 到 1
- **正值**: 策略优于基准
- **负值**: 策略表现不佳
- **目标**: >1.5的年化Sharpe比率

## ⚠️ 风险管理建议

1. **止损设置**: 20日MA下方5%
2. **分批建仓**: 降低单次风险
3. **波动时段**: 注意美股开盘前后
4. **超买警示**: RSI>80时减仓
5. **趋势跟随**: 顺势而为，避免逆势

## 🇭🇰 港股特色考量

- **交易时段**: 9:30-12:00, 13:00-16:00
- **T+0交易**: 当日可买卖
- **涨跌幅限制**: 无限制(部分股票除外)
- **汇率影响**: 港币兑人民币波动
- **外资流入**: 关注南向资金动向

## 📝 示例分析结果

运行 `python3 example_analysis.py` 查看三种典型市场情况：

1. **上升趋势** (阿里巴巴 9988.HK): RSI超买，建议减仓
2. **下降趋势** (美团 3690.HK): RSI超卖，寻找反弹机会  
3. **震荡市场** (小米 1810.HK): RSI中性，持续观察

## 🔍 技术实现特点

- **纯Python实现**: 无外部依赖，易于部署
- **数学库替代**: 自实现统计函数，避免numpy依赖
- **错误处理**: 完善的边界条件检查
- **性能优化**: 高效的指标计算算法
- **可扩展性**: 模块化设计，易于添加新指标

## 📞 使用建议

1. **数据质量**: 确保至少20个交易日数据
2. **参数调整**: 根据不同股票特性调整周期参数
3. **组合使用**: 结合基本面分析使用
4. **风险控制**: 严格执行止损策略
5. **持续监控**: 定期更新数据和模型

---

**免责声明**: 本工具仅供技术分析参考，不构成投资建议。投资有风险，入市需谨慎。