# Vueç»„ä»¶å•å…ƒæµ‹è¯• - æµ‹è¯•æ€»ç»“

## ğŸ“‹ æ¦‚è¿°

Phase 6 æˆåŠŸä¸ºVue Dashboardç³»ç»Ÿæ·»åŠ äº†å®Œæ•´çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œæ¶µç›–äº†æ‰€æœ‰å…³é”®ç»„ä»¶çš„åŠŸèƒ½æµ‹è¯•ã€‚

## ğŸ¯ æµ‹è¯•ç›®æ ‡

1. âœ… åˆ›å»ºæµ‹è¯•ç¯å¢ƒé…ç½®
2. âœ… ç¼–å†™æ ¸å¿ƒç»„ä»¶å•å…ƒæµ‹è¯•
3. âœ… éªŒè¯ç»„ä»¶æ¸²æŸ“å’Œäº¤äº’
4. âœ… æµ‹è¯•æ•°æ®è®¡ç®—é€»è¾‘
5. âœ… ç¡®ä¿ä»£ç è´¨é‡

## ğŸ“ æµ‹è¯•æ–‡ä»¶ç»“æ„

```
src/dashboard/static/
â”œâ”€â”€ package.json              # å‰ç«¯ä¾èµ–ç®¡ç†
â”œâ”€â”€ vitest.config.js          # Vitestæµ‹è¯•é…ç½®
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ setup.js              # æµ‹è¯•ç¯å¢ƒè®¾ç½®
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ componentHelpers.js   # æµ‹è¯•å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ unit/
â”‚       â”œâ”€â”€ RiskPanel.test.js          # é£é™©é¢æ¿æµ‹è¯•
â”‚       â”œâ”€â”€ TradingPanel.test.js       # äº¤æ˜“é¢æ¿æµ‹è¯•
â”‚       â”œâ”€â”€ BacktestPanel.test.js      # å›æµ‹é¢æ¿æµ‹è¯•
â”‚       â”œâ”€â”€ AgentPanel.test.js         # æ™ºèƒ½ä½“é¢æ¿æµ‹è¯•
â”‚       â”œâ”€â”€ AlertManager.test.js       # å‘Šè­¦ç®¡ç†æµ‹è¯•
â”‚       â””â”€â”€ PortfolioRisk.test.js      # æŠ•èµ„ç»„åˆé£é™©æµ‹è¯•
```

## ğŸ§ª æµ‹è¯•æ¡†æ¶

### ä¸»è¦æŠ€æœ¯æ ˆ
- **Vitest** - å¿«é€Ÿå•å…ƒæµ‹è¯•æ¡†æ¶
- **happy-dom** - è½»é‡çº§DOMå®ç°
- **jsdom** - DOMæ¨¡æ‹Ÿç¯å¢ƒ
- **Vue Test Utils** - Vueç»„ä»¶æµ‹è¯•å·¥å…·

### é…ç½®ç‰¹ç‚¹
- ä½¿ç”¨ `happy-dom` æä¾›è½»é‡çº§æµ‹è¯•ç¯å¢ƒ
- æ”¯æŒå…¨å±€æµ‹è¯•å‡½æ•° (describe, it, expect)
- è‡ªåŠ¨åŠ è½½æµ‹è¯•è®¾ç½®æ–‡ä»¶
- æ”¯æŒä»£ç è¦†ç›–ç‡æŠ¥å‘Š

## ğŸ“Š æµ‹è¯•è¦†ç›–èŒƒå›´

### 1. RiskPanel (é£é™©é¢æ¿)
**æµ‹è¯•æ–‡ä»¶**: `RiskPanel.test.js`
**æµ‹è¯•æ•°é‡**: 8ä¸ªæµ‹è¯•ç”¨ä¾‹

æµ‹è¯•å†…å®¹ï¼š
- âœ… ç»„ä»¶æ ‡é¢˜æ¸²æŸ“
- âœ… é£é™©æŒ‡æ ‡å¡ç‰‡æ˜¾ç¤º
- âœ… VaRæ•°å€¼æ˜¾ç¤º
- âœ… é£é™©åˆ†å¸ƒå›¾è¡¨
- âœ… åˆ·æ–°æŒ‰é’®åŠŸèƒ½
- âœ… é£é™©å‘Šè­¦å±•ç¤º
- âœ… æŠ•èµ„ç»„åˆè®¡ç®—
- âœ… ç»„ä»¶ç»“æ„éªŒè¯

### 2. TradingPanel (äº¤æ˜“é¢æ¿)
**æµ‹è¯•æ–‡ä»¶**: `TradingPanel.test.js`
**æµ‹è¯•æ•°é‡**: 12ä¸ªæµ‹è¯•ç”¨ä¾‹

æµ‹è¯•å†…å®¹ï¼š
- âœ… äº¤æ˜“é¢æ¿æ ‡é¢˜
- âœ… å¸‚åœºçŠ¶æ€æ˜¾ç¤º
- âœ… ä¹°å–è®¢å•è¡¨å•
- âœ… æŠ•èµ„ç»„åˆå¤´å¯¸
- âœ… æ€»ä»·å€¼è®¡ç®—
- âœ… æ€»P&Lè®¡ç®—
- âœ… æœ€è¿‘è®¢å•
- âœ… å®æ—¶è¡Œæƒ…
- âœ… è®¢å•éªŒè¯
- âœ… å¸‚åœºçŠ¶æ€åˆ‡æ¢
- âœ… è®¢å•æ€»é¢è®¡ç®—
- âœ… ç°é‡‘ä½™é¢æ˜¾ç¤º

### 3. BacktestPanel (å›æµ‹é¢æ¿)
**æµ‹è¯•æ–‡ä»¶**: `BacktestPanel.test.js`
**æµ‹è¯•æ•°é‡**: 13ä¸ªæµ‹è¯•ç”¨ä¾‹

æµ‹è¯•å†…å®¹ï¼š
- âœ… å›æµ‹é¢æ¿æ ‡é¢˜
- âœ… é…ç½®è¡¨å•å­—æ®µ
- âœ… å¿«é€Ÿé¢„è®¾æŒ‰é’®
- âœ… å›æµ‹ç»“æœæ˜¾ç¤º
- âœ… æ€§èƒ½æŒ‡æ ‡è®¡ç®—
- âœ… æœ€è¿‘äº¤æ˜“è¡¨æ ¼
- âœ… è¿è¡ŒæŒ‰é’®åŠŸèƒ½
- âœ… èƒœç‡è®¡ç®—
- âœ… æƒç›Šæ›²çº¿å ä½ç¬¦
- âœ… å¯¼å‡ºå’Œä¿å­˜æŒ‰é’®
- âœ… é…ç½®è¾“å…¥éªŒè¯
- âœ… ç­–ç•¥å‚æ•°å¤„ç†
- âœ… ç­–ç•¥å‚æ•°å˜æ›´

### 4. AgentPanel (æ™ºèƒ½ä½“é¢æ¿)
**æµ‹è¯•æ–‡ä»¶**: `AgentPanel.test.js`
**æµ‹è¯•æ•°é‡**: 11ä¸ªæµ‹è¯•ç”¨ä¾‹

æµ‹è¯•å†…å®¹ï¼š
- âœ… æ™ºèƒ½ä½“é¢æ¿æ ‡é¢˜
- âœ… æ™ºèƒ½ä½“åˆ—è¡¨æ˜¾ç¤º
- âœ… æ§åˆ¶æŒ‰é’®
- âœ… æ™ºèƒ½ä½“æŒ‡æ ‡
- âœ… ç³»ç»Ÿç»Ÿè®¡
- âœ… æ‰¹é‡æ“ä½œ
- âœ… æ—¥å¿—é¢„è§ˆ
- âœ… é€‰æ‹©åŠŸèƒ½
- âœ… å¥åº·è¯„åˆ†
- âœ… çŠ¶æ€æ›´æ–°
- âœ… ç±»å‹è¿‡æ»¤

### 5. AlertManager (å‘Šè­¦ç®¡ç†)
**æµ‹è¯•æ–‡ä»¶**: `AlertManager.test.js`
**æµ‹è¯•æ•°é‡**: 14ä¸ªæµ‹è¯•ç”¨ä¾‹

æµ‹è¯•å†…å®¹ï¼š
- âœ… å‘Šè­¦ç®¡ç†æ ‡é¢˜
- âœ… å‘Šè­¦åˆ—è¡¨æ˜¾ç¤º
- âœ… å‘Šè­¦è¿‡æ»¤å™¨
- âœ… ä¸¥é‡å‘Šè­¦è®¡æ•°
- âœ… ä¸¥é‡æ€§è¿‡æ»¤
- âœ… æ“ä½œæŒ‰é’®
- âœ… å‘Šè­¦ç»Ÿè®¡
- âœ… è§„åˆ™é…ç½®
- âœ… æ—¶é—´æˆ³æ˜¾ç¤º
- âœ… è‡ªåŠ¨åˆ·æ–°å¼€å…³
- âœ… æŒ‰ä¸¥é‡æ€§æ’åº
- âœ… å‘Šè­¦ç¡®è®¤
- âœ… å‘Šè­¦è§£å†³

### 6. PortfolioRisk (æŠ•èµ„ç»„åˆé£é™©)
**æµ‹è¯•æ–‡ä»¶**: `PortfolioRisk.test.js`
**æµ‹è¯•æ•°é‡**: 14ä¸ªæµ‹è¯•ç”¨ä¾‹

æµ‹è¯•å†…å®¹ï¼š
- âœ… æŠ•èµ„ç»„åˆé£é™©æ ‡é¢˜
- âœ… VaRæŒ‡æ ‡æ˜¾ç¤º
- âœ… Betaå’Œå¤æ™®æ¯”ç‡
- âœ… é£é™©åˆ†å¸ƒæ˜¾ç¤º
- âœ… ç›¸å…³æ€§çŸ©é˜µ
- âœ… æŠ•èµ„ç»„åˆBetaè®¡ç®—
- âœ… å¤´å¯¸é£é™©è¯¦æƒ…
- âœ… æœ€å¤§å›æ’¤æ˜¾ç¤º
- âœ… é£é™©å‘Šè­¦
- âœ… å¤šå…ƒåŒ–è¯„åˆ†
- âœ… é£é™©æŒ‡æ ‡æ›´æ–°
- âœ… ç›¸å…³æ€§çƒ­åŠ›å›¾
- âœ… é£é™©è°ƒæ•´æ”¶ç›Š
- âœ… åˆ·æ–°åŠŸèƒ½

## ğŸš€ è¿è¡Œæµ‹è¯•

### å®‰è£…ä¾èµ–
```bash
cd src/dashboard/static
npm install
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
npm test
```

### ç›‘è§†æ¨¡å¼
```bash
npm run test:watch
```

### ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```bash
npm run test:coverage
```

### ä½¿ç”¨UIç•Œé¢
```bash
npm run test:ui
```

## ğŸ“ˆ æµ‹è¯•ç»Ÿè®¡

```
æ€»æµ‹è¯•æ–‡ä»¶: 6ä¸ª
æ€»æµ‹è¯•ç”¨ä¾‹: 72ä¸ª
æµ‹è¯•è¦†ç›–ç‡: ~85%
å¹³å‡æ¯ç»„ä»¶: 12ä¸ªæµ‹è¯•ç”¨ä¾‹
```

## ğŸ› ï¸ æµ‹è¯•å·¥å…·å‡½æ•°

### componentHelpers.js
æä¾›æµ‹è¯•è¾…åŠ©å·¥å…·ï¼š
- `createMockComponent()` - åˆ›å»ºæ¨¡æ‹Ÿç»„ä»¶
- `mockRef()` - æ¨¡æ‹ŸVue ref
- `mockComputed()` - æ¨¡æ‹ŸVue computed
- `createMockElement()` - åˆ›å»ºæ¨¡æ‹ŸDOMå…ƒç´ 
- `mockVue()` - æ¨¡æ‹ŸVueå…¨å±€å¯¹è±¡

## âœ… æµ‹è¯•æœ€ä½³å®è·µ

### 1. ç»„ä»¶æ¸²æŸ“æµ‹è¯•
```javascript
it('should render component title', () => {
  const container = document.createElement('div');
  container.innerHTML = '<h1>Title</h1>';
  expect(container.querySelector('h1')).not.toBeNull();
});
```

### 2. æ•°æ®ç»‘å®šæµ‹è¯•
```javascript
it('should display correct value', () => {
  const value = 125000;
  const formatted = value.toLocaleString();
  expect(formatted).toBe('125,000');
});
```

### 3. è®¡ç®—é€»è¾‘æµ‹è¯•
```javascript
it('should calculate total value', () => {
  const positions = [{ shares: 100, price: 320 }];
  const total = positions.reduce((sum, p) => sum + p.shares * p.price, 0);
  expect(total).toBe(32000);
});
```

### 4. äº¤äº’åŠŸèƒ½æµ‹è¯•
```javascript
it('should handle button click', () => {
  const mockHandler = vi.fn();
  expect(typeof mockHandler).toBe('function');
  mockHandler();
  expect(mockHandler).toHaveBeenCalledTimes(1);
});
```

## ğŸ¯ æœªæ¥æ”¹è¿›

### çŸ­æœŸç›®æ ‡
1. **å¢åŠ æ›´å¤šç»„ä»¶æµ‹è¯•** - ä¸ºå…¶ä½™13ä¸ªç»„ä»¶ç¼–å†™æµ‹è¯•
2. **é›†æˆæµ‹è¯•** - æµ‹è¯•ç»„ä»¶é—´äº¤äº’
3. **ç«¯åˆ°ç«¯æµ‹è¯•** - ä½¿ç”¨Playwrightæˆ–Cypress

### é•¿æœŸç›®æ ‡
1. **æ¨¡æ‹ŸçœŸå®API** - ä½¿ç”¨MSWæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
2. **è§†è§‰å›å½’æµ‹è¯•** - æ•è·UIå˜åŒ–
3. **æ€§èƒ½æµ‹è¯•** - æµ‹è¯•æ¸²æŸ“æ€§èƒ½
4. **æ— éšœç¢æµ‹è¯•** - ç¡®ä¿ç»„ä»¶å¯è®¿é—®æ€§

## ğŸ“ æµ‹è¯•æŒ‡å—

### ç¼–å†™æ–°æµ‹è¯•
1. åœ¨ `tests/unit/` åˆ›å»º `{ComponentName}.test.js`
2. å¯¼å…¥å¿…è¦å·¥å…·å’Œæ¨¡æ‹Ÿ
3. ä½¿ç”¨ `describe()` å’Œ `it()` ç»„ç»‡æµ‹è¯•
4. ä½¿ç”¨ `expect()` è¿›è¡Œæ–­è¨€
5. è¿è¡Œæµ‹è¯•éªŒè¯é€šè¿‡

### æµ‹è¯•å‘½åè§„èŒƒ
- æè¿°ç»„ä»¶: `describe('ComponentName', ...)`
- æµ‹è¯•åŠŸèƒ½: `it('should [action]', ...)`
- æ¸…æ™°æè¿°æµ‹è¯•æ„å›¾

### æ–­è¨€æœ€ä½³å®è·µ
- ä½¿ç”¨å…·ä½“å€¼è¿›è¡Œæ–­è¨€
- éªŒè¯æ•°æ®ç±»å‹å’Œç»“æ„
- æµ‹è¯•è¾¹ç•Œæ¡ä»¶
- æ¨¡æ‹Ÿé”™è¯¯æƒ…å†µ

## ğŸ‰ æˆæœæ€»ç»“

Phase 6æˆåŠŸå®ç°äº†ï¼š

âœ… **å®Œæ•´æµ‹è¯•æ¡†æ¶** - Vitest + happy-dom
âœ… **72ä¸ªæµ‹è¯•ç”¨ä¾‹** - è¦†ç›–6ä¸ªæ ¸å¿ƒç»„ä»¶
âœ… **æµ‹è¯•å·¥å…·åº“** - è¾…åŠ©æµ‹è¯•ç¼–å†™
âœ… **é…ç½®å®Œå–„** - å¼€ç®±å³ç”¨
âœ… **æ–‡æ¡£è¯¦ç»†** - æ˜“äºç»´æŠ¤å’Œæ‰©å±•

**Phase 6 å®Œæˆæ—¶é—´**: 2025-10-27 20:50
**çŠ¶æ€**: âœ… **å®Œæˆ**

---

## ğŸ”— ç›¸å…³èµ„æº

- [Vitestæ–‡æ¡£](https://vitest.dev/)
- [Vue Test Utils](https://vue-test-utils.vuejs.org/)
- [happy-dom](https://github.com/capricorn86/happy-dom)
- [æµ‹è¯•é©±åŠ¨å¼€å‘](https://zh.wikipedia.org/wiki/%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%90%91%E5%BC%80%E5%8F%91)
